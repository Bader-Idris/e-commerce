import{_ as c,i as l,c as n,a as i,t as d,d as f,o as a}from"./index-bW6KImGH.js";const p={data(){return{seconds:10,verified:!1}},mounted(){this.remaining(),this.verifyEmail()},methods:{remaining(){const t=setInterval(()=>{this.seconds--,this.seconds===0&&clearInterval(t)},1e3)},async verifyEmail(){const t=new Headers;t.append("Content-Type","application/json");const o=JSON.stringify({email:this.$route.query.email,verificationToken:this.$route.query.token}),r={method:"POST",headers:t,body:o,redirect:"follow"};try{const s=await fetch("/api/v1/auth/verify-email",r);if(s.status===200){const e=await s.json();console.log(e),this.verified=!0}else if(s.status===401){const e=await s.json();l(e.msg,{theme:"dark",type:"error",dangerouslyHTMLString:!0}),this.verified=!1}}catch(s){console.error(s),this.verified=!1}}}},u={key:0,class:"verify"},h=i("p",null,"your email's been verified",-1),m={key:1,class:"warn"};function y(t,o,r,s,e,v){return e.verified?(a(),n("div",u,[h,i("p",null,[i("span",null,d(e.seconds<10?"0"+e.seconds:e.seconds),1),f(" seconds to go to the main page")])])):(a(),n("div",m," please check your email again "))}const g=c(p,[["render",y]]);export{g as default};
