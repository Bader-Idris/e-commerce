import{_ as c,i as h,c as u,a as t,e as a,v as l,f,b as w,w as _,g,r as y,o as m,d as b}from"./index-BojetKus.js";const k={data(){return{user:"",email:"",password:"",showPrompt:!1}},methods:{async register(){const p="/api/v1/auth/register",s={name:this.user,email:this.email,password:this.password},n=new Headers;n.append("Content-Type","application/json");const d={method:"POST",headers:n,body:JSON.stringify(s),redirect:"follow"};try{const e=await fetch(p,d),r=await e.json();if(!e.ok)e.status===400?(h(r.msg,{theme:"dark",type:"error",dangerouslyHTMLString:!0}),this.showPrompt=!0):e.status;else{const i=this.$route.query.redirect||"/protected";this.$router.push(i)}}catch(e){console.error(e)}}}},v={class:"register"},x=t("h1",null,"Register",-1),V=t("label",{for:"user"},"user name",-1),P=t("label",{for:"email"},"email",-1),N=t("label",{for:"password"},"Password",-1),T=t("button",{class:"btn"},"Register",-1),C={key:0,class:"prompt"};function S(p,s,n,d,e,r){const i=y("AppLink");return m(),u("div",v,[t("form",{class:"form",onSubmit:s[3]||(s[3]=f((...o)=>r.register&&r.register(...o),["prevent"]))},[x,V,a(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>e.user=o),name:"user",type:"text",class:"input"},null,512),[[l,e.user]]),P,a(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>e.email=o),name:"email",type:"email",class:"input"},null,512),[[l,e.email]]),N,a(t("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>e.password=o),name:"password",type:"text",class:"input"},null,512),[[l,e.password]]),T],32),e.showPrompt?(m(),u("div",C,[w(i,{to:"/login",class:"internal-link"},{default:_(()=>[b("login page")]),_:1})])):g("",!0)])}const H=c(k,[["render",S]]);export{H as default};
